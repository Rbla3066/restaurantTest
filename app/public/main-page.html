<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Experiod</title>
    <script type="text/javascript" src="js/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src='js/tether.min.js'></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="js/mdb.js"></script>
    
    <!-- SOCIAL MEDIA ICONS -->
    <link rel="stylesheet" type="text/css" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- GOOGLE FONTS -->
    <link href='https://fonts.googleapis.com/css?family=Dancing+Script:700|Oswald' rel='stylesheet' type='text/css'>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- MDB core CSS -->
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- LOCAL CSS -->
    <link rel="stylesheet" type="text/css" href="css/main-page-handlebars.css">
</head>

<body>
    <!-- NAV -->
    <nav class="navbar red default">
        <div class="container-fluid">
            <div class="navbar-header" style='float: left'>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <img src="images/logo/minilogo.png" class="img-responsive">
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/home" class="waves-effect waves-light">Home <span class="sr-only">(current)</span></a></li>
                    <li><a href="#" class="waves-effect waves-light">Restaurants</a></li>
                </ul>
            </div>
            <div id="userInfo" style="float: right">
            </div>
        </div>
    </nav>
    <!-- /NAV -->
    <div class="container">
        <div class="row">
            
            <div class="col-md-12">

                <ul id="location" class="collection z-depth-3">
                    <li class="collection-item avatar">
                        <span><h3 style='float: left; margin-left: 25px'>Getting Location.. </h3></span><span><img class='text-right' src="images/spiffygif_46x46.gif" style='margin-top: 15px; margin-left: 35px'alt="" class="circle"><span></span>
                        
                    </li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">

                <ul id="restaurants" class="collection z-depth-3">
                    <li class="collection-item avatar">
                        <span><h3 style='float: left; margin-left: 25px'>Finding Your Matches.. </h3></span><span><img class='text-right' src="images/spiffygif_46x46.gif" style='margin-top: 15px; margin-left: 35px'alt="" class="circle"><span></span>
                        
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!--Footer section-->
    <footer class="page-footer elegant-color center-on-small-only">
        <div class="container-fluid">
            <div class="row text-center">
                <!--first column-->
                <div class="col-md-3">
                    <p class="column-title white-text">USEFUL LINKS</p>
                    <ul>
                        <li><a href="#">Contact us</a></li>
                        <li><a href="#">Support</a></li>
                        <li><a href="#">Bug Report</a></li>
                        <li><a href="#">License</a></li>
                    </ul>
                </div>
                <!--/.first column-->
                <!--second column-->
                <div class="col-md-3">
                    <p class="column-title white-text">Similar</p>
                    <ul>
                        <li><a href="#">Book Hotel</a></li>
                        <li><a href="#">Order Pizza</a></li>
                        <li><a href="#">Go Out</a></li>
                        <li><a href="#">Fun Places</a></li>
                        <li><a href="#">Night-Life</a></li>
                    </ul>
                </div>
                <!--/.second column-->
                <!--third column-->
                <div class="col-md-3">
                    <p class="column-title white-text">Popular</p>
                    <ul>
                        <li><a href="#">stakehouse.com</a></li>
                        <li><a href="#">yelp.com</a></li>
                        <li><a href="#">newrestautrant.com</a></li>
                        <li><a href="#">enjoymore.com</a></li>
                        <li><a href="#">njrestaurants.com</a></li>
                    </ul>
                </div>
                <!--/.third column-->
                <div class="col-md-3">
                    <p class="column-title white-text">Popular</p>
                    <ul>
                        <li><a href="#">stakehouse.com</a></li>
                        <li><a href="#">yelp.com</a></li>
                        <li><a href="#">newrestautrant.com</a></li>
                        <li><a href="#">enjoymore.com</a></li>
                        <li><a href="#">njrestaurants.com</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright text-center rgba-black-light">
            <div class="container-fluid">
                <p>Â© 2015 Copyright Experiod</p>
            </div>
        </div>
    </footer>
    <!--/.Footer section-->
    <!-- JQuery -->
    
<div id='modals'></div>
</body>

</html>
<script type="text/javascript">


$.get('/user-info', function(user){
    $("#location").html("<li><h4 class='title header text-xs-center'>Your matches near "+user.location.address+"</h4></li>");
    $("#userInfo").html("<span style='font-size:20px; color:white'>"+user.displayName+" <img style='height: 75px'src='"+user.picture+"'></span>")
    var url = window.location.origin + '/api/restaurants';
    $.get(url, function(data) {
        $("#restaurants").empty();
        for(var i=0; i<data.length; i++){
            var categories = "";
            if(data[i].categories != undefined){
                for(var j=0; j<data[i].categories.length; j++){
                    if(data[i].categories[j] != undefined) categories += data[i].categories[j][0];
                    if(j != data[i].categories.length -1) categories += ", ";
                }
            }
            
            $("#restaurants").append("<li class='collection-item avatar'><span style='float:left'><img src='"+data[i].image+"' class='circle'><span style='font-size: 20px' class='title'>"+data[i].name+"</span><p>"+categories+"</p><button type='button' class='' data-toggle='modal' data-target='#myModal"+i+"'>Details</button></span><p class='text-xs-right address'><br>"+data[i].location.display_address[0]+"<br>"+data[i].location.display_address[1]+"</p></li>");
            $("#modals").append('<div class="modal fade" id="myModal'+i+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel'+i+'" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="false">&times;</span></button><h3 class="modal-title" id="myModalLabel'+i+'">'+data[i].name+'</h3></div><div class="modal-body"><div class="row"><div class="col-md-5"><img class="img-responsive" style="height: 200px" src='+data[i].image+'></div><div class="col-md-7">"'+data[i].text+'"</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div></div></div></div>');

        };
    });
    
})

    

        
</script>
